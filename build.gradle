plugins {
	id "pl.allegro.tech.build.axion-release"
	id "de.protos.etrice-base" apply false
	id "de.protos.etunit-convert" apply false
}

apply from: "$rootDir/gradle/scmVersion.gradle"
apply from: "$rootDir/gradle/versions.gradle"

/**
 * Requires property 'additionalPropertiesFile'
 */
def loadAdditionalPropertiesFile() {
	if(project.hasProperty('additionalPropertiesFile')) {
		def props = new Properties()
		file(additionalPropertiesFile).withInputStream {
			stream -> props.load(stream)
		}
		props.each { entry ->
			project.ext[entry.key] = entry.value
		}
		println "Loaded properties from ${additionalPropertiesFile}: ${props.keySet()}"
	}
}

loadAdditionalPropertiesFile()

allprojects {
	apply plugin: 'base'

	group = 'org.eclipse.etrice'
	version = scmVersion.version
	
	repositories {
		maven {
			url 'https://repo.eclipse.org/content/repositories/maven_central/'
		}
	}
}