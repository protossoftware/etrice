<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>The C examples project</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<!-- xhtml,3,next,html --> 
<meta name="src" content="etrice-doc.tex" /> 
<meta name="date" content="2015-07-03 15:56:00" /> 
<link rel="stylesheet" type="text/css" href="etrice-doc.css" /> 
</head><body 
>
<!--l. 15--><div class="crosslinks"><p class="noindent">[<a 
href="etrice-docse11.html" >next</a>] [<a 
href="etrice-docch4.html" >prev</a>] [<a 
href="etrice-docch4.html#tailetrice-docch4.html" >prev-tail</a>] [<a 
href="#tailetrice-docse10.html">tail</a>] [<a 
href="etrice-docch4.html#etrice-docse10.html" >up</a>] </p></div>
<h3 class="sectionHead"><span class="titlemark">4.1   </span> <a 
 id="x16-690001"></a>The C examples project</h3>
<!--l. 17--><p class="noindent" >This example project <span 
class="ec-lmtt-10">org.eclipse.etrice.examples.c </span>illustrates a simplified traffic light control. It actually
consists of four different steps of increasing complexity that can be generated and built one by one (but not in
parallel).
</p><!--l. 23--><p class="noindent" >Most of the classes are contained in a common ROOM model <span 
class="ec-lmtt-10">model/TrafficLight/TrafficLight.room </span>that also shows
how ROOM classes can form a library and used as building blocks for several systems. Also the physical model is shared by all
steps of this example.
</p><!--l. 28--><p class="noindent" >Contained in the example you will find a little Java GUI that some of the example use to simulate a real traffic light. The GUI
is contacted using TCP/IP ports 4441 and subsequent. The protocol used on the TCP/IP socket connection is a simple text
protocol with commands for the lights. Three of the example steps make use of this simulator GUI. They also contain a
launch configuration for it.
</p><!--l. 35--><p class="noindent" ><span 
class="ec-lmssbx-10">Note: </span>Before compiling and linking a new step of the example the project should be cleaned to avoid duplicate symbols due
to artifacts from the previous build.
<a 
 id="x16-69001r87"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">4.1.1   </span> <a 
 id="x16-700001"></a>Traffic light - step 1</h4>
<!--l. 41--><p class="noindent" >The main ROOM model and the mapping model of this example is contained in <span 
class="ec-lmtt-10">org.eclipse.etrice.examples.c/model/TrafficLight_step1</span>.
                                                                                            
                                                                                            
It also contains launch configurations for the code generation and for running the application.
<a 
 id="x16-70001r1"></a>
</p>
<h5 class="subsubsectionHead"><span class="titlemark">4.1.1.1   </span> <a 
 id="x16-710001"></a>Purpose</h5>
<!--l. 48--><p class="noindent" >This example illustrates how a single actor can be tested against a test harness.
<a 
 id="x16-71001r92"></a>
</p>
<h5 class="subsubsectionHead"><span class="titlemark">4.1.1.2   </span> <a 
 id="x16-720002"></a>Details</h5>
<!--l. 52--><p class="noindent" >A <span 
class="ec-lmtt-10">PedestrianTrafficLightController </span>is an actor that controls a traffic light consisting of a traffic light with
red, yellow and green for the cars, a second traffic light with just red and green and a request button for the
pedestrians.
</p><!--l. 56--><p class="noindent" >The controller has two ports, <span 
class="ec-lmtt-10">fct </span>and <span 
class="ec-lmtt-10">tlInterface</span>. The first one uses a protocol <span 
class="ec-lmtt-10">PTrafficLightController </span>that offers
the high level commands <span 
class="ec-lmtt-10">standby</span>, <span 
class="ec-lmtt-10">start </span>and <span 
class="ec-lmtt-10">stop</span>. The second one uses a conjugated protocol <span 
class="ec-lmtt-10">PTrafficLightInterface</span>
which controls each of the lights separately.
</p><!--l. 62--><p class="noindent" >The test harness <span 
class="ec-lmtt-10">TrafficLightControllerTestHarness </span>is connected to both ports and drives the test in several
steps.
</p><!--l. 65--><p class="noindent" >To run the test first generate the code using <span 
class="ec-lmtt-10">gen_TrafficLight_step1.launch</span>, then compile and link it (using the
CDTbuild). Since this step doesn&#8217;t use a GUI you can just start the application using <span 
class="ec-lmtt-10">run_TrafficLight_step1.launch</span>.
<a 
 id="x16-72001r93"></a>
</p>
<h5 class="subsubsectionHead"><span class="titlemark">4.1.1.3   </span> <a 
 id="x16-730003"></a>Noteworthy</h5>
     <ul class="itemize1">
     <li class="itemize">usage of a ROOM model as library for several systems
     </li>
     <li class="itemize">creation of a test harness for an actor</li></ul>
<a 
 id="x16-73001r91"></a>
<h4 class="subsectionHead"><span class="titlemark">4.1.2   </span> <a 
 id="x16-740002"></a>Traffic light - step 2</h4>
<!--l. 78--><p class="noindent" >The main ROOM model and the mapping model of this example is contained in <span 
class="ec-lmtt-10">org.eclipse.etrice.examples.c/model/TrafficLight_step2</span>.
It also contains launch configurations for the code generation, for launching the simulator GUI and for running the
application.
<a 
 id="x16-74001r94"></a>
</p>
<h5 class="subsubsectionHead"><span class="titlemark">4.1.2.1   </span> <a 
 id="x16-750001"></a>Purpose</h5>
<!--l. 86--><p class="noindent" >This example shows the control of a single block of traffic lights containing a car light and a light for the pedestrians. It
illustrates how a stack of abstraction levels is used to conveniently divide the problem into relatively simple
parts.
<a 
 id="x16-75001r96"></a>
</p>
<h5 class="subsubsectionHead"><span class="titlemark">4.1.2.2   </span> <a 
 id="x16-760002"></a>Details</h5>
<!--l. 93--><p class="noindent" >The 4 levels of this application starts with a <span 
class="ec-lmtt-10">TrafficLightHeadquarters </span>on the top. It controls the global operating mode
of the traffic light block. The test harness <span 
class="ec-lmtt-10">TrafficLightControllerTestHarness </span>is connected to both ports and drives the
test in several steps.
</p><!--l. 99--><p class="noindent" >On the next level we have a <span 
class="ec-lmtt-10">PedestrianTrafficLightController </span>which offers some very general commands like <span 
class="ec-lmtt-10">start</span>,
<span 
class="ec-lmtt-10">stop </span>and <span 
class="ec-lmtt-10">standby</span>.
</p><!--l. 102--><p class="noindent" >On the second level we find an actor <span 
class="ec-lmtt-10">PTrafficLightInterface </span>that offers basic traffic light control in the form of switching
the state of each single light separately.
</p><!--l. 106--><p class="noindent" >On the base level we have an actor handling a TCP/IP socket connection with a general text protocol.
</p><!--l. 109--><p class="noindent" >To run the test first generate the code using <span 
class="ec-lmtt-10">gen_TrafficLight_step2.launch</span>, then compile and link it (using the
CDTbuild). Since this step uses a GUI with a single block of lights you&#8217;ll have to launch the simulator using
<span 
class="ec-lmtt-10">run_simulator_1_block.launch</span>. Then you can just start the application using <span 
class="ec-lmtt-10">run_TrafficLight_step2.launch</span>.
                                                                                            
                                                                                            
</p><!--l. 115--><p class="noindent" >After going through a short initialization and standby phase the traffic light goes into a mode of permanent green for cars.
After pressing the &#8217;request&#8217; button in the simulator GUI the light switches to red for cars and green for pedestrians and back
to permanent green for cars.
<a 
 id="x16-76001r97"></a>
</p>
<h5 class="subsubsectionHead"><span class="titlemark">4.1.2.3   </span> <a 
 id="x16-770003"></a>Noteworthy</h5>
     <ul class="itemize1">
     <li class="itemize">use abstraction levels to break a problem into smaller pieces.</li></ul>
<a 
 id="x16-77001r95"></a>
<h4 class="subsectionHead"><span class="titlemark">4.1.3   </span> <a 
 id="x16-780003"></a>Traffic light - step 3</h4>
<!--l. 128--><p class="noindent" >The main ROOM model and the mapping model of this example is contained in <span 
class="ec-lmtt-10">org.eclipse.etrice.examples.c/model/TrafficLight_step3</span>.
It also contains launch configurations for the code generation, for launching the simulator GUI and for running the
application.
<a 
 id="x16-78001r98"></a>
</p>
<h5 class="subsubsectionHead"><span class="titlemark">4.1.3.1   </span> <a 
 id="x16-790001"></a>Purpose</h5>
<!--l. 136--><p class="noindent" >This example shows the control of two blocks of traffic lights each containing a car light and a light for the pedestrians. It
uses a replicated stack of actors as introduced in step 2.
<a 
 id="x16-79001r100"></a>
</p>
<h5 class="subsubsectionHead"><span class="titlemark">4.1.3.2   </span> <a 
 id="x16-800002"></a>Details</h5>
<!--l. 142--><p class="noindent" >The head quarters actor of this example controls two blocks of traffic lights. It already has a replicated port which is now
connected to a doubled <span 
class="ec-lmtt-10">PedestrianTrafficLightController</span>. Of course the replication then has also to be applied to the
other levels of the stack introduced in step 2.
</p><!--l. 148--><p class="noindent" >To run the test first generate the code using <span 
class="ec-lmtt-10">gen_TrafficLight_step3.launch</span>, then compile and link it (using the
CDTbuild). Since this step uses a GUI with a two blocks of lights you&#8217;ll have to launch the simulator using
<span 
class="ec-lmtt-10">run_simulator_2_blocks.launch</span>. Then you can just start the application using <span 
class="ec-lmtt-10">run_TrafficLight_step3.launch</span>.
<a 
 id="x16-80001r101"></a>
</p>
<h5 class="subsubsectionHead"><span class="titlemark">4.1.3.3   </span> <a 
 id="x16-810003"></a>Noteworthy</h5>
     <ul class="itemize1">
     <li class="itemize">use replication for multiple instances of the same.</li></ul>
<a 
 id="x16-81001r99"></a>
<h4 class="subsectionHead"><span class="titlemark">4.1.4   </span> <a 
 id="x16-820004"></a>Traffic light - step 4</h4>
<!--l. 163--><p class="noindent" >The main ROOM model and the mapping model of this example is contained in <span 
class="ec-lmtt-10">org.eclipse.etrice.examples.c/model/TrafficLight_step4</span>.
It also contains launch configurations for the code generation, for launching the simulator GUI and for running the
application.
<a 
 id="x16-82001r102"></a>
</p>
<h5 class="subsubsectionHead"><span class="titlemark">4.1.4.1   </span> <a 
 id="x16-830001"></a>Purpose</h5>
<!--l. 171--><p class="noindent" >This example shows the control of two blocks of traffic lights each containing a car light and a light for the pedestrians. It
uses a container actor for the three lower levels of the stack introduced in step 2. Then replication has to applied only to the
container actor which simplifies the task.
<a 
 id="x16-83001r104"></a>
</p>
<h5 class="subsubsectionHead"><span class="titlemark">4.1.4.2   </span> <a 
 id="x16-840002"></a>Details</h5>
<!--l. 179--><p class="noindent" >The head quarters actor of this example controls two blocks of traffic lights. It already has a replicated port which is now
connected to a doubled <span 
class="ec-lmtt-10">TrafficLightControllerWithInfrastructure</span>. The latter one
<a 
 id="x16-84001r105"></a>
                                                                                            
                                                                                            
</p>
<h5 class="subsubsectionHead"><span class="titlemark">4.1.4.3   </span> <a 
 id="x16-850003"></a>Noteworthy</h5>
     <ul class="itemize1">
     <li class="itemize">use hierarchy to group levels functionality to reusable blocks.</li></ul>
                                                                                            
                                                                                            
<!--l. 190--><div class="crosslinks"><p class="noindent">[<a 
href="etrice-docse11.html" >next</a>] [<a 
href="etrice-docch4.html" >prev</a>] [<a 
href="etrice-docch4.html#tailetrice-docch4.html" >prev-tail</a>] [<a 
href="etrice-docse10.html" >front</a>] [<a 
href="etrice-docch4.html#etrice-docse10.html" >up</a>] </p></div>
<!--l. 190--><p class="noindent" ><a 
 id="tailetrice-docse10.html"></a></p> 
</body></html> 
