/**
 * @author generated by eTrice
 *
 * Source File of Node node1 with SubSystem sys1
 * 
 */

#include "node1_sys1.h"

/* include instances for all classes */
#include "node1_sys1_Inst.h"
#include "node1_sys1_Disp.h"

#include "debugging/etLogger.h"
#include "debugging/etMSCLogger.h"

#include "platform/etTimer.h"
#include "etRuntimeConfig.h"


/* data for Node node1 with SubSytsem sys1 */
typedef struct node1_sys1 {
	char *name;
	volatile int shutdownRequest;
} node1_sys1;

static node1_sys1 node1_sys1Inst = {"node1_sys1", 0};

void node1_sys1_initActorInstances(void);
void node1_sys1_constructActorInstances(void);

static void node1_sys1_initMessageServices(void) {
	ET_MSC_LOGGER_SYNC_ENTRY("node1_sys1", "initMessageServices")
	
	/* filling all message service threads with data */
	msgService_PhysicalThread1.thread.stacksize = 1024;
	msgService_PhysicalThread1.thread.priority = 1;
	msgService_PhysicalThread1.thread.threadName = "PhysicalThread1";
	msgService_PhysicalThread1.thread.threadFunction = (etThreadFunction) etMessageService_execute;
	msgService_PhysicalThread1.thread.threadFunctionData = &msgService_PhysicalThread1;
	
	
	msgService_PhysicalThread2.thread.stacksize = 1024;
	msgService_PhysicalThread2.thread.priority = 5;
	msgService_PhysicalThread2.thread.threadName = "PhysicalThread2";
	msgService_PhysicalThread2.thread.threadFunction = (etThreadFunction) etMessageService_execute;
	msgService_PhysicalThread2.thread.threadFunctionData = &msgService_PhysicalThread2;
	
	
	msgService_PhysicalThread3.thread.stacksize = 1024;
	msgService_PhysicalThread3.thread.priority = 10;
	msgService_PhysicalThread3.thread.threadName = "PhysicalThread3";
	msgService_PhysicalThread3.thread.threadFunction = (etThreadFunction) etMessageService_execute;
	msgService_PhysicalThread3.thread.threadFunctionData = &msgService_PhysicalThread3;
	
	/* initialization of all message services */
	etMessageService_init(&msgService_PhysicalThread1, msgBuffer_PhysicalThread1, 50, 64, MsgDispatcher_PhysicalThread1_receiveMessage, MsgDispatcher_PhysicalThread1_execute, EXECMODE_BLOCKED);
	etMessageService_init(&msgService_PhysicalThread2, msgBuffer_PhysicalThread2, 50, 64, MsgDispatcher_PhysicalThread2_receiveMessage, MsgDispatcher_PhysicalThread2_execute, EXECMODE_BLOCKED);
	etMessageService_init(&msgService_PhysicalThread3, msgBuffer_PhysicalThread3, 50, 64, MsgDispatcher_PhysicalThread3_receiveMessage, MsgDispatcher_PhysicalThread3_execute, EXECMODE_BLOCKED);
	
	ET_MSC_LOGGER_SYNC_EXIT
}

static void node1_sys1_startMessageServices(void) {
	ET_MSC_LOGGER_SYNC_ENTRY("node1_sys1", "startMessageServices")
	
	etMessageService_start(&msgService_PhysicalThread1);
	etMessageService_start(&msgService_PhysicalThread2);
	etMessageService_start(&msgService_PhysicalThread3);
	
	ET_MSC_LOGGER_SYNC_EXIT
}

static void node1_sys1_stopMessageServices(void) {
	ET_MSC_LOGGER_SYNC_ENTRY("node1_sys1", "stopMessageServices")
	
	etMessageService_stop(&msgService_PhysicalThread1);
	etMessageService_stop(&msgService_PhysicalThread2);
	etMessageService_stop(&msgService_PhysicalThread3);
	
	ET_MSC_LOGGER_SYNC_EXIT
}

static void node1_sys1_destroyMessageServices(void) {
	ET_MSC_LOGGER_SYNC_ENTRY("node1_sys1", "destroyMessageServices")
	
	etMessageService_destroy(&msgService_PhysicalThread1);
	etMessageService_destroy(&msgService_PhysicalThread2);
	etMessageService_destroy(&msgService_PhysicalThread3);
	
	ET_MSC_LOGGER_SYNC_EXIT
}

void node1_sys1_init(void) {
	ET_MSC_LOGGER_SYNC_ENTRY("node1_sys1", "init")
	etLogger_logInfoF("%s_init", node1_sys1Inst.name);
	
	/* construct all actors */
	node1_sys1_constructActorInstances();
	
	/* initialization of all message services */
	node1_sys1_initMessageServices();
	
	/* init all actors */
	node1_sys1_initActorInstances();
	
	ET_MSC_LOGGER_SYNC_EXIT
}

void node1_sys1_start(void) {
	ET_MSC_LOGGER_SYNC_ENTRY("node1_sys1", "start")
	etLogger_logInfoF("%s_start", node1_sys1Inst.name);
	node1_sys1_startMessageServices();
	ET_MSC_LOGGER_SYNC_EXIT
}

void node1_sys1_run(void) {
	ET_MSC_LOGGER_SYNC_ENTRY("node1_sys1", "run")
	
	etThread_sleep(1000);
	
	
	ET_MSC_LOGGER_SYNC_EXIT
}

void node1_sys1_stop(void){
	ET_MSC_LOGGER_SYNC_ENTRY("node1_sys1", "stop")
	etLogger_logInfoF("%s_stop", node1_sys1Inst.name);

	node1_sys1_stopMessageServices();
	
	ET_MSC_LOGGER_SYNC_EXIT
}

void node1_sys1_destroy(void){
	ET_MSC_LOGGER_SYNC_ENTRY("node1_sys1", "destroy")
	etLogger_logInfoF("%s_destroy", node1_sys1Inst.name);
	
	node1_sys1_destroyMessageServices();
	
	ET_MSC_LOGGER_SYNC_EXIT
}

void node1_sys1_shutdown(void){
	ET_MSC_LOGGER_SYNC_ENTRY("node1_sys1", "shutdown")
	etLogger_logInfoF("%s_shutdown", node1_sys1Inst.name);
	
	node1_sys1Inst.shutdownRequest = 1;
	
	ET_MSC_LOGGER_SYNC_EXIT
}


void node1_sys1_constructActorInstances(void){
	ET_MSC_LOGGER_SYNC_ENTRY("node1_sys1", "constructActorInstances")
	
	
	ET_MSC_LOGGER_SYNC_EXIT
}

void node1_sys1_initActorInstances(void){
	ET_MSC_LOGGER_SYNC_ENTRY("node1_sys1", "initActorInstances")
	
	Tester_init(&_LS_sys1_tester);
	Fork_init(&_LS_sys1_fork);
	Redirect_init(&_LS_sys1_redirect1);
	Redirect_init(&_LS_sys1_redirect2);
	Redirect_init(&_LS_sys1_redirect3);
	Redirect_init(&_LS_sys1_redirect4);
	Redirect_init(&_LS_sys1_redirect5);
	Redirect_init(&_LS_sys1_redirect6);
	Redirect_init(&_LS_sys1_redirect7);
	Redirect_init(&_LS_sys1_redirect8);
	Redirect_init(&_LS_sys1_redirect9);
	Redirect_init(&_LS_sys1_redirect10);
	Join_init(&_LS_sys1_join);
	Supervisor_init(&_LS_sys1_supervisor);
	
	ET_MSC_LOGGER_SYNC_EXIT
}

