apply plugin: 'java'

apply from: "$rootDir/gradle/publish.gradle"
apply from: "$rootDir/gradle/etGenerator.gradle"

dependencies {
	modelpath_java files('model')
	
	compile project(':runtime:org.eclipse.etrice.runtime.java')
}

def models = [
	'model/etrice/api/logger.room',
	'model/etrice/api/tcp.room',
	'model/etrice/api/timer.room',
	'model/etrice/api/contracts/monitors.room'
]

def genDir = "$buildDir/src-gen"

sourceSets {
	main {
		java {
			srcDirs = [genDir]
		}
		resources {
            srcDirs = ['model']
            excludes = ['**/diagrams/']
        }
	}
}

createGeneratorTask('generate', 'java', models, genDir, '-lib')
compileJava.dependsOn generate