RoomModel PortModel {

	LogicalSystem PortModel {
		SubSystemRef main: MainSubSystem
	}

	SubSystemClass MainSubSystem {
		ActorRef appl: Application
		LogicalThread defaultThread
	}

	ActorClass Application {
		Structure {
			ActorRef a: A
			ActorRef aa: AA
			ActorRef b: B
			ActorRef bb: BB
			ActorRef c: C
			ActorRef cc: CC
			ActorRef d: D
			ActorRef dd: DD
			ActorRef e: E
			ActorRef ee: EE
			Binding aa.p0 and a.p1
			Binding aa.p1 and a.p0
			Binding bb.p0 and b.p1
			Binding bb.p1 and b.p0
			Binding dd.p0 and d.p1
			Binding dd.p1 and d.p0
		}
	}

	ProtocolClass TestProtocol {
		incoming {
			Message incomingTest()
		}
		outgoing {
			Message outgoingTest()
		}
	}

	ActorClass A {
		Interface {
			Port p0: TestProtocol
			conjugated Port p1: TestProtocol
		}
		Structure {
			external Port p0
			external Port p1
		}
	}

	ActorClass B {
		Interface {
			Port p0: TestProtocol
			conjugated Port p1: TestProtocol
		}
	}

	ActorClass B1 {
		Interface {
			Port p0: TestProtocol
		}
	}

	ActorClass B2 {
		Interface {
			conjugated Port p0: TestProtocol
		}
	}

	ActorClass C {
		Structure {
			Port p0: TestProtocol
			conjugated Port p1: TestProtocol
		}
	}

	ActorClass D {
		Interface {
			Port p0: TestProtocol
			conjugated Port p1: TestProtocol
		}
		Structure {
			Binding d2.p0 and p1
			Binding d1.p0 and p0
			ActorRef d1: B1
			ActorRef d2: B2
		}
	}

	ActorClass E {
		Structure {
			Binding e2e.p0 and p0
			Binding e1e.p0 and p1
			ActorRef e1e: B1
			ActorRef e2e: B2
			Port p0: TestProtocol
			conjugated Port p1: TestProtocol
		}
	}

	ActorClass AA extends A { }

	ActorClass BB extends B {
		Structure {
			Binding bb2.p0 and p1
			Binding p0 and bb1.p0
			ActorRef bb1: B1
			ActorRef bb2: B2
		}
	}

	ActorClass CC extends C {
		Structure {
			Binding cc2.p0 and p0
			Binding cc1.p0 and p1
			ActorRef cc1: B1
			ActorRef cc2: B2
		}
	}

	ActorClass DD extends D { }

	ActorClass EE extends E { }

}